<!-- BEGIN: Subheader -->
<div class="m-subheader" appunwraptag="">
  <div class="d-flex align-items-center">
    <div class="mr-auto">
      <h3 class="m-subheader__title ">
        Nieuw product toevoegen
      </h3>

    </div>
    <div>
    </div>
  </div>
</div>
<!-- END: Subheader -->
<div class="m-content">
  <!--Begin::Main Portlet-->
  <div class="m-portlet m-portlet--full-height">
    <!--begin: Portlet Head-->
    <div class="m-portlet__head">
      <div class="m-portlet__head-caption">
        <div class="m-portlet__head-title">
          <h3 class="m-portlet__head-text">
            Productstappenplan  |  {{item.artikelnaam}}
          </h3>
        </div>
      </div>
    </div>
    <!--end: Portlet Head-->
    <!--begin: Portlet Body-->
    <div class="m-portlet__body m-portlet__body--no-padding">
      <!--begin: Form Wizard-->
      <div class="m-wizard m-wizard--3 m-wizard--success" id="m_wizard">
        <!--begin: Message container -->
        <div class="m-portlet__padding-x">
          <!-- Here you can put a message or alert -->
        </div>
        <!--end: Message container -->
        <div class="row m-row--no-padding">
          <div class="col-xl-3 col-lg-12">
            <!--begin: Form Wizard Head -->
            <div class="m-wizard__head">
              <!--begin: Form Wizard Progress -->
              <div class="m-wizard__progress">
                <p-progressBar [showValue]="false" [value]="wizardcounter/3 * 100"></p-progressBar>

              </div>
              <!--end: Form Wizard Progress -->
              <!--begin: Form Wizard Nav -->
              <div class="m-wizard__nav">
                <div class="m-wizard__steps">
                  <div class="m-wizard__step m-wizard__step--current" >
                    <div class="m-wizard__step-info">
                      <a href="#" class="m-wizard__step-number">
                        <span>
                          <span>
                            1
                          </span>
                        </span>
                      </a>
                      <div class="m-wizard__step-line">
                        <span></span>
                      </div>
                      <div class="m-wizard__step-label">
                        Algemene informatie
                      </div>
                    </div>
                  </div>
                  <div [class.m-wizard__step--current]="wizardcounter > 0" class="m-wizard__step">
                    <div   class="m-wizard__step-info">
                      <a href="#" class="m-wizard__step-number">
                        <span>
                          <span>
                            2
                          </span>
                        </span>
                      </a>
                      <div class="m-wizard__step-line">
                        <span></span>
                      </div>
                      <div class="m-wizard__step-label">
                        Specificaties en locatie
                      </div>
                    </div>
                  </div>
                  <div [class.m-wizard__step--current]="wizardcounter > 1" class="m-wizard__step" >
                    <div class="m-wizard__step-info">
                      <a href="#" class="m-wizard__step-number">
                        <span>
                          <span>
                            3
                          </span>
                        </span>
                      </a>
                      <div class="m-wizard__step-line">
                        <span></span>
                      </div>
                      <div class="m-wizard__step-label">
                        Foto's en bestanden
                      </div>
                    </div>
                  </div>
                  <div [class.m-wizard__step--current]="wizardcounter > 2" class="m-wizard__step" m-wizard-target="m_wizard_form_step_4">
                    <div class="m-wizard__step-info">
                      <a href="#" class="m-wizard__step-number">
                        <span>
                          <span>
                            4
                          </span>
                        </span>
                      </a>
                      <div class="m-wizard__step-line">
                        <span></span>
                      </div>
                      <div class="m-wizard__step-label">
                        Bevestiging
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!--end: Form Wizard Nav -->
            </div>
            <!--end: Form Wizard Head -->
          </div>
          <div class="col-xl-9 col-lg-12">
            <!--begin: Form Wizard Form-->
            <div class="m-wizard__form" id="scrollstart">
              <!-- 							1) Use m-form--label-align-left class to alight the form input lables to the right 							2) Use m-form--state class to highlight input control borders on form validation 						-->
              <form class="m-form m-form--label-align-left- m-form--state-" id="m_form">
                <!--begin: Form Body -->
                <div class="m-portlet__body m-portlet__body--no-padding">
                  <!--begin: Form Wizard Step 1-->
                  <form [formGroup]="firstform">
                  <div *ngIf="wizardcounter == 0" class="m-wizard__form-step m-wizard__form-step--current" id="m_wizard_form_step_1">
                    <div class="m-form__section m-form__section--first">
                      <div class="m-form__heading">
                        <h3 class="m-form__heading-title">
                          Algemene informatie
                        </h3>
                      </div>
                      <div class="form-group m-form__group row">
                        <label class=" col-form-label">
                          * Artikelnaam:
                        </label>
                        <div class="col-xl-9 col-lg-9">
                          <input formControlName="artikelnaam" type="text" name="artikelnaam" class="form-control m-input col-lg-4" placeholder="Naam" value="">
                          <span class="m-form__help">
                            Geef een duidelijke titel voor uw product.
                          </span>
                        </div>
                      </div>
                      <div class="form-group m-form__group row">
                        <label for="exampleTextarea">
                          Omschrijving: 
                        </label>
                        <textarea formControlName="omschrijving" class="form-control m-input col-lg-4 " id="exampleTextarea" rows="3" name="omschrijving"></textarea>
                      </div>

                    </div>
                    <div class="m-separator m-separator--dashed m-separator--lg"></div>
                    <div class="m-form__section">
                      <div class="m-form__heading">
                        <h3 class="m-form__heading-title">
                          Productcategorie
                          <i data-toggle="m-tooltip" data-width="auto" class="m-form__heading-help-icon flaticon-info" title="Some help text goes here"></i>
                        </h3>
                      </div>

                      <div class="form-group m-form__group row">
                        <label class=" col-form-label">
                          * Categorie:
                        </label>
                        <div class="col-lg-4">
                          <select formControlName="category" name="category" class="form-control m-input">
                            <option value="jansenprofiel">
                              Jansenprofiel
                            </option>
                            <option value="constructieprofiel">
                              Constructieprofiel
                            </option>
                            <option value="deur">
                              Deur
                            </option>
                            <option value="raam">
                              Raam
                            </option>
                            <option value="geveldeel">
                              Geveldeel
                            </option>
                            <option value="overige">
                              Overige
                            </option>

                          </select>
                        </div>
                      </div>

                      <div class="form-group m-form__group row">
                        <label class="col-form-label">
                          * Serie:
                        </label>
                        <div class="col-lg-4">
                          <select formControlName="jansenserie" name="serie" class="form-control m-input">
                            <option value="ART15">
                              ART-15
                            </option>
                            <option value="janisolARTE">
                              Janisol ARTE
                            </option>
                            <option value="economy">
                              Economy
                            </option>
                            <option value="janisol">
                              Janisol
                            </option>
                            <option value="janisolHI">
                              Janisol HI
                            </option>
                            <option value="janisol2">
                              Janisol 2
                            </option>
                            <option value="JanisolC4">
                              Janisol C4
                            </option>
                            <option value="JansenViss">
                              Jansen Viss
                            </option>
                            <option value="overige">
                              Overige
                            </option>
                          </select>
                        </div>
                      </div>
                    </div>
                    <div class="m-separator m-separator--dashed m-separator--lg"></div>
                    <div class="m-form__section">
                      <div class="m-form__heading">
                        <h3 class="m-form__heading-title">
                          Prijzen en hoeveelheid
                          <i  data-toggle="m-tooltip" data-width="auto" class="m-form__heading-help-icon flaticon-info" title="Some help text goes here"></i>
                        </h3>
                      </div>
                      <label class="col-form-label">
												Prijs overeen te komen
											</label>
											<div class="col-lg-4">
												<span class="m-switch">
													<label>
														<input type="checkbox"formControlName="prijsovereentekomen" name=""/>
														<span></span>
													</label>
												</span>
                      </div>
                      <div *ngIf="!firstform.value.prijsovereentekomen">
                      <div class="form-group m-form__group">
                        <label>
                          Prijs per eenheid
                        </label>
                        <div class="input-group">
                          <div class="input-group-prepend">
                            <span class="input-group-text" id="basic-addon2">
                              €
                            </span>
                          </div>
                          <input pInputText pKeyFilter="money" formControlName="vraagPrijsPerEenheid" name="vraagPrijsPerEenheid" type="text" class="form-control m-input  col-lg-4" placeholder="prijs">
                        </div>
                      </div>
                      <div class="form-group m-form__group">
                        <label>
                          Totaalprijs
                        </label>
                        <div class="input-group">
                          <div class="input-group-prepend">
                            <span class="input-group-text" id="basic-addon2">
                              €
                            </span>
                          </div>
                          <input pInputText pKeyFilter="money" formControlName="vraagPrijsTotaal" name="vraagPrijsTotaal" type="text" class="form-control m-input  col-lg-4" placeholder="prijs">
                        </div>
                      </div>
                    </div>
                      <div class="form-group m-form__group">
                        <label>
                          Hoeveelheid
                        </label>
                        <div class="input-group">
                          <input pInputText pKeyFilter="pint" type="text" formControlName="hoeveelheid" name="hoeveelheid" class="form-control m-input  col-lg-4" placeholder="">
                        </div>
                      </div>
                    </div>
                    <div class="m-separator m-separator--dashed m-separator--lg"></div>
                    <div class="m-form__section">
                      <div class="m-form__heading">
                        <h3 class="m-form__heading-title">
                          Andere
                          <i data-toggle="m-tooltip" data-width="auto" class="m-form__heading-help-icon flaticon-info " title="Some help text goes here"></i>
                        </h3>
                      </div>
                      <div class="form-group m-form__group row">
                        <label class="col-xl-3 col-lg-3 col-form-label">
                          * Transport inbegrepen:
                        </label>
                        <div class=" col-lg-4">
                          <select formControlName="transportInbegrepen" name="transportinbegrepen" class="form-control m-input">
                            <option value="false">
                              Neen
                            </option>
                            <option value="true">
                              Ja
                            </option>

                          </select>
                        </div>
                      </div>
                      <div class="form-group m-form__group row">
                        <label class="col-xl-3 col-lg-3 col-form-label">
                          * Concept:
                        </label>
                        <div class="col-lg-4">
                          <select formControlName="concept" name="concept" class="form-control m-input">
                            <option value="Te koop">Te koop
                            </option>
                            <option value="Te huur">Te huur
                            </option>
                            <option value="Te Koop of Te huur">Te koop of te huur</option>
                          </select>
                        </div>
                        <div class="form-group m-form__group row">
                          <label class="col-xl-3 col-lg-3 col-form-label">
                            * Beschikbaarheid:
                          </label>
                          <div class="col-lg-4">
                            <p-calendar formControlName="datumBeschikbaar" name="datumbeschik" inline="true" [minDate]="today" readonlyInput="true" class="form-control m-input"></p-calendar>

                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!--end: Form Wizard Step 1-->
                </form>
                  <!--begin: Form Wizard Step 2-->
                  <div *ngIf="wizardcounter == 1">
                    <form action="">
                    <div class="m-form__section">
                      <div class="m-form__heading">
                        <h3 class="m-form__heading-title">
                          Specificaties
                        </h3>
                      </div>
                      <div class="form-group m-form__group row">
                        <div class=" m-form__group-sub">
                          <label class="form-control-label">
                            <div class="m-demo__preview m-demo__preview--btn">
                              <a (click)="addSpecificatie()" class="btn btn-success m-btn m-btn--icon m-btn--icon-only m-btn--pill">
                                <i class="fa fa-plus-circle"></i>
                              </a>
                            </div>
                          </label>
                          <div *ngFor="let spec of specificaties; let i = index " class="form-group m-form__group row">
                            <div class="col-1">
                              <div class="m-demo__preview m-demo__preview--btn">
                                <a (click)="removeItem(i)" class="btn btn-danger m-btn m-btn--icon m-btn--icon-only m-btn--pill">
                                  <i class="fa fa-minus-circle"></i>
                                </a>
                              </div>
                            </div>
                            <div class="col-lg-5">
                             
                                 <p-dropdown [name]="spec.specificatieSleutel + '_' + i" [options]="eigenschappen" [(ngModel)]="spec.specificatieSleutel"  editable="true" placeholder="Selecteer een eigenschap" class="form-control m-input" ></p-dropdown>

                              <span class="m-form__help">
                                Selecteer eigenschap of voeg er een toe (*)
                              </span>
                            </div>
                            <div class="col-lg-3">
                              <input type="text" [name]="spec.specificatieValue + '_' + i" [(ngModel)]="spec.specificatieValue" class="form-control m-input" [value]="spec.specificatieValue"
                                 required>
                              <span class="m-form__help">
                                Waarde  (*)
                              </span>
                            </div>
                            <div class="col-lg-3">
                              <input type="text" [name]="spec.specificatieOmschrijving + '_' + i" [(ngModel)]="spec.specificatieOmschrijving" class="form-control m-input">
                              <span class="m-form__help">
                                Omschrijving
                              </span>
                            </div>
                          </div>
                        </div>

                      </div>
                    </div>
                    <div class="m-separator m-separator--dashed m-separator--lg"></div>

                    <div class="m-form__section m-form__section--first">
                      <div class="m-form__heading">
                        <h3 class="m-form__heading-title">
                          Locatie
                        </h3>
                      </div>

                      <div class="form-group m-form__group row">
                        <label class="col-xl-3 col-lg-3 col-form-label">
                          Adres:
                        </label>
                        <div class="col-xl-9 col-lg-9">
                          <ng4geo-autocomplete [userSettings]="userSettings" (componentCallback)="autoCompleteCallback1($event)"></ng4geo-autocomplete>
                          <span class="m-form__help">
                            Geef het adres in van uw product of selecteer rechtstreeks op de kaart.
                          </span>
                        </div>
                      </div>
                      <style>
                        agm-map {
                          height: 300px;
                        }
                      </style>
                      
                      <agm-map (mapClick)="setLocation($event)" [latitude]="51.2627187555929" [zoom]="zoom" [longitude]="4.5024117984374925">
                        <agm-marker *ngIf="selectedlocation" [latitude]="selectedlocation.latitude" [longitude]="selectedlocation.longtitude"></agm-marker>
                      </agm-map>

                      
                    </div>
                 
                 </form> </div>

                  <div *ngIf="wizardcounter == 2"  class="m-wizard__form-step m-wizard__form-step--current" id="m_wizard_form_step_1">
                    <p-progressBar *ngIf="uploadloading" mode="indeterminate"></p-progressBar>

                    <div *ngIf="!loading" class="m-form__section m-form__section--first">
                      <div class="m-form__heading">
                        <h3 class="m-form__heading-title">
                          Foto's en bestanden 
                        </h3>
                      </div>
                      <span class="m-section__sub">
                        Hoofdfoto*  Uw foto moeten kleiner zijn dan 2.5 MB
                      </span>
                      <div class="m-section__content">
                        <p-fileUpload name="demo[]" auto="true"  customUpload="true" (uploadHandler)="onMainPhotoUpload($event)" chooseLabel="Kies één hoofdfoto" cancelLabel="Annuleren" accept="image/*" maxFileSize="25000000">
                          <ng-template pTemplate="content">
                            Foto moet kleiner zijn dan 1MB.
                          </ng-template>
                        </p-fileUpload>
                      </div>

                      <span class="m-section__sub">
                          Fotogallerij - Uw foto's moeten kleiner zijn dan 2.5 MB
                        </span>
                        <div class="m-section__content">
                          <p-fileUpload name="demo[]" auto="true"   customUpload="true" (uploadHandler)="onPhotoGalleryUpload($event)"  chooseLabel="Kies optioneel meerdere foto's" cancelLabel="Annuleren" multiple="true" accept="image/*" maxFileSize="25000000">
                            <ng-template pTemplate="content">
                                Elke foto moet kleiner zijn dan 1MB.
                            </ng-template>
                          </p-fileUpload>
                        </div>

                        <span class="m-section__sub">
                          PDF's en zips. Gelieve bij DWG's, documenten of spreadsheets het bestand eerst te comprimeren naar een zipbestand.
                          </span>
                          <div class="m-section__content">
                            <p-fileUpload name="demo[]" auto="true"   customUpload="true" (uploadHandler)="onSupportFiles($event)"  chooseLabel="Kies optioneel meerdere bestanden" cancelLabel="Annuleren"  multiple="true" maxFileSize="25000000">
                              <ng-template pTemplate="content">
                              </ng-template>
                            </p-fileUpload>
                          </div>

                    </div>
                    <div class="m-separator m-separator--dashed m-separator--lg"></div>


                  </div>
                  <!--end: Form Wizard Step 2-->
                </div>
                <!--end: Form Body -->
                <!--begin: Form Actions -->
                <div class="m-portlet__foot m-portlet__foot--fit m--margin-top-40">
                  <div class="m-form__actions">
                    <div class="row">
                      <div class="col-lg-6 m--align-left">
                        <a href="#" class="btn btn-secondary m-btn m-btn--custom m-btn--icon" data-wizard-action="prev">
                          <span>
                            <i class="la la-arrow-left"></i>
                            &nbsp;&nbsp;
                            <span>
                              Back
                            </span>
                          </span>
                        </a>
                      </div>
                      <div class="col-lg-6 m--align-right">
                        
                          <a *ngIf="wizardcounter < 2" (click)="back()" class="btn btn-success m-btn m-btn--custom m-btn--icon"  data-wizard-action="next">
                            <span>
                                <i class="la la-arrow-left"></i> 

                                <span>
                                  Terug
                                </span>
                                &nbsp;&nbsp;
                    
                              </span>
                            </a>
                        <a (click)="next()" class="btn btn-success m-btn m-btn--custom m-btn--icon" *ngIf="wizardcounter < 2" [class.disabled]="!firstform.valid" data-wizard-action="next">
                          <span>
                            <span>
                              Volgende
                            </span>
                            &nbsp;&nbsp;
                            <i class="la la-arrow-right"></i>
                          </span>
                        </a>
                        <a (click)="toUpload()" class="btn btn-success m-btn m-btn--custom m-btn--icon" *ngIf="wizardcounter > 1" [class.disabled]="!photouploaded" data-wizard-action="next">
                          <span>
                            <span>
                              Volgende
                            </span>
                            &nbsp;&nbsp;
                            <i class="la la-arrow-right"></i>
                          </span>
                        </a>
                      </div>
                    </div>
                  </div>
                </div>
                <!--end: Form Actions -->
              </form>
            </div>
            <!--end: Form Wizard Form-->
          </div>
        </div>
      </div>
      <!--end: Form Wizard-->
    </div>
    <!--end: Portlet Body-->
  </div>
  <!--End::Main Portlet-->
</div>

<p-confirmDialog header="Bevestigen" acceptLabel="Ok" rejectLabel="Annuleren" header="Product opslaan" icon="fa fa-question-circle" width="425"></p-confirmDialog>
<p-confirmDialog header="Bevestigen" key="second"  acceptLabel="Ok" rejectLabel="Annuleren" header="Product opslaan" icon="fa fa-question-circle" width="425"></p-confirmDialog>


<div *ngIf="loading" class="loading">Loading&#8230;</div>

<style>
  .loading {
    position: fixed;
    z-index: 999;
    height: 2em;
    width: 2em;
    overflow: show;
    margin: auto;
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
  }

  /* Transparent Overlay */

  .loading:before {
    content: '';
    display: block;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.3);
  }

  /* :not(:required) hides these rules from IE9 and below */

  .loading:not(:required) {
    /* hide "loading..." text */
    font: 0/0 a;
    color: transparent;
    text-shadow: none;
    background-color: transparent;
    border: 0;
  }

  .loading:not(:required):after {
    content: '';
    display: block;
    font-size: 10px;
    width: 1em;
    height: 1em;
    margin-top: -0.5em;
    -webkit-animation: spinner 1500ms infinite linear;
    -moz-animation: spinner 1500ms infinite linear;
    -ms-animation: spinner 1500ms infinite linear;
    -o-animation: spinner 1500ms infinite linear;
    animation: spinner 1500ms infinite linear;
    border-radius: 0.5em;
    -webkit-box-shadow: rgba(0, 0, 0, 0.75) 1.5em 0 0 0, rgba(0, 0, 0, 0.75) 1.1em 1.1em 0 0, rgba(0, 0, 0, 0.75) 0 1.5em 0 0, rgba(0, 0, 0, 0.75) -1.1em 1.1em 0 0, rgba(0, 0, 0, 0.5) -1.5em 0 0 0, rgba(0, 0, 0, 0.5) -1.1em -1.1em 0 0, rgba(0, 0, 0, 0.75) 0 -1.5em 0 0, rgba(0, 0, 0, 0.75) 1.1em -1.1em 0 0;
    box-shadow: rgba(0, 0, 0, 0.75) 1.5em 0 0 0, rgba(0, 0, 0, 0.75) 1.1em 1.1em 0 0, rgba(0, 0, 0, 0.75) 0 1.5em 0 0, rgba(0, 0, 0, 0.75) -1.1em 1.1em 0 0, rgba(0, 0, 0, 0.75) -1.5em 0 0 0, rgba(0, 0, 0, 0.75) -1.1em -1.1em 0 0, rgba(0, 0, 0, 0.75) 0 -1.5em 0 0, rgba(0, 0, 0, 0.75) 1.1em -1.1em 0 0;
  }

  /* Animation */

  @-webkit-keyframes spinner {
    0% {
      -webkit-transform: rotate(0deg);
      -moz-transform: rotate(0deg);
      -ms-transform: rotate(0deg);
      -o-transform: rotate(0deg);
      transform: rotate(0deg);
    }
    100% {
      -webkit-transform: rotate(360deg);
      -moz-transform: rotate(360deg);
      -ms-transform: rotate(360deg);
      -o-transform: rotate(360deg);
      transform: rotate(360deg);
    }
  }

  @-moz-keyframes spinner {
    0% {
      -webkit-transform: rotate(0deg);
      -moz-transform: rotate(0deg);
      -ms-transform: rotate(0deg);
      -o-transform: rotate(0deg);
      transform: rotate(0deg);
    }
    100% {
      -webkit-transform: rotate(360deg);
      -moz-transform: rotate(360deg);
      -ms-transform: rotate(360deg);
      -o-transform: rotate(360deg);
      transform: rotate(360deg);
    }
  }

  @-o-keyframes spinner {
    0% {
      -webkit-transform: rotate(0deg);
      -moz-transform: rotate(0deg);
      -ms-transform: rotate(0deg);
      -o-transform: rotate(0deg);
      transform: rotate(0deg);
    }
    100% {
      -webkit-transform: rotate(360deg);
      -moz-transform: rotate(360deg);
      -ms-transform: rotate(360deg);
      -o-transform: rotate(360deg);
      transform: rotate(360deg);
    }
  }

  @keyframes spinner {
    0% {
      -webkit-transform: rotate(0deg);
      -moz-transform: rotate(0deg);
      -ms-transform: rotate(0deg);
      -o-transform: rotate(0deg);
      transform: rotate(0deg);
    }
    100% {
      -webkit-transform: rotate(360deg);
      -moz-transform: rotate(360deg);
      -ms-transform: rotate(360deg);
      -o-transform: rotate(360deg);
      transform: rotate(360deg);
    }
  }
</style>